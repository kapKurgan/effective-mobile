{"uid":"1c10dcce3ada6008","name":"Логин заблокированного пользователя","fullName":"tests.test_page_login.TestsLogin#test_login_negative","historyId":"b313dbed5a8cd7626cb46536219c660a","time":{"start":1769522869095,"stop":1769522874477,"duration":5382},"description":"Пользователь заблокирован","descriptionHtml":"<p>Пользователь заблокирован</p>\n","status":"skipped","statusMessage":"XFAIL\n\nAssertionError: Page URL expected to be 'https://www.saucedemo.com/inventory.html'\nActual value: https://www.saucedemo.com/ \nCall log:\n  - Expect \"to_have_url\" with timeout 5000ms\n    9 × unexpected value \"https://www.saucedemo.com/\"","statusTrace":"self = <test_page_login.TestsLogin object at 0x7f4a3065a710>\nopen_home_page = <pages.site_pages.SitePages object at 0x7f4a3060f130>\ninput_value = ['locked_out_user', 'secret_sauce', 'Логин заблокированного пользователя', 'Пользователь заблокирован']\n\n    @pytest.mark.order(2)\n    @pytest.mark.regression\n    @pytest.mark.negative\n    @pytest.mark.login\n    @pytest.mark.all\n    @allure.story(\"Негативный сценарий\")\n    @allure.tag(\"negative\")\n    @allure.severity(allure.severity_level.MINOR)\n    @pytest.mark.xfail(strict=True)\n    @pytest.mark.parametrize(\"input_value\", login_date_negative)\n    def test_login_negative(self, open_home_page, input_value: list) -> None:\n        run_login_test(open_home_page, input_value)\n    \n        expect_visible(open_home_page.error_text, open_home_page.error_text)\n        actual_msg = open_home_page.error_text.locator('h3').text_content()\n        print(f\"  ⚠️ Ошибка: {actual_msg}\")\n        with allure.step(f\"Появилось сообщение об ошибке: {actual_msg}\"):\n            attach_screenshot(open_home_page.page, \"Скриншот с ошибкой\")\n        with allure.step(f\"Проверяем переход на '{LOGO_PAGE_PRODUCTS}'\"):\n>           open_home_page.page_products()\n\ntests/test_page_login.py:83: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/site_pages.py:56: in page_products\n    expect_url(self.page, BASE_URL + PATH_PRODUCTS)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npage = <Page url='https://www.saucedemo.com/'>\nexpected = 'https://www.saucedemo.com/inventory.html'\n\n    def expect_url(page: Page, expected: str) -> None:\n        \"\"\"\n            Нативный expect: URL страницы.\n        \"\"\"\n        with allure.step(f'Проверить URL: «{expected}»'):\n>           expect(page).to_have_url(expected)\nE           AssertionError: Page URL expected to be 'https://www.saucedemo.com/inventory.html'\nE           Actual value: https://www.saucedemo.com/ \nE           Call log:\nE             - Expect \"to_have_url\" with timeout 5000ms\nE               9 × unexpected value \"https://www.saucedemo.com/\"\n\nutils/checks.py:35: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1769522866315,"stop":1769522866316,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser_type_launch_args","time":{"start":1769522866316,"stop":1769522866316,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"pytestconfig","time":{"start":1769522866316,"stop":1769522866316,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_verify_url","time":{"start":1769522866316,"stop":1769522866316,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"delete_output_dir","time":{"start":1769522866316,"stop":1769522866316,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"playwright","time":{"start":1769522866317,"stop":1769522866790,"duration":473},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser_type","time":{"start":1769522866791,"stop":1769522866791,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"launch_browser","time":{"start":1769522866791,"stop":1769522866791,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"connect_options","time":{"start":1769522866791,"stop":1769522866791,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser","time":{"start":1769522866792,"stop":1769522868404,"duration":1612},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"device","time":{"start":1769522868404,"stop":1769522868405,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_pw_artifacts_folder","time":{"start":1769522868405,"stop":1769522868405,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser_context_args","time":{"start":1769522868405,"stop":1769522868405,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"output_path","time":{"start":1769522868406,"stop":1769522868406,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"new_context","time":{"start":1769522868406,"stop":1769522868406,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_artifacts_recorder","time":{"start":1769522868406,"stop":1769522868406,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"context","time":{"start":1769522868406,"stop":1769522868419,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"page","time":{"start":1769522868419,"stop":1769522868479,"duration":60},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Подготовка тестового окружение (фикстура)","time":{"start":1769522868479,"stop":1769522869088,"duration":609},"status":"passed","steps":[{"name":"Открыть страницу: https://www.saucedemo.com/","time":{"start":1769522868480,"stop":1769522868947,"duration":467},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Проверить URL: «https://www.saucedemo.com/»","time":{"start":1769522868947,"stop":1769522869034,"duration":87},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Проверить видимость элемента «Swag Labs»","time":{"start":1769522869034,"stop":1769522869067,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Проверить текст элемента: «Swag Labs»","time":{"start":1769522869068,"stop":1769522869088,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true}],"testStage":{"description":"Пользователь заблокирован","status":"skipped","statusMessage":"XFAIL\n\nAssertionError: Page URL expected to be 'https://www.saucedemo.com/inventory.html'\nActual value: https://www.saucedemo.com/ \nCall log:\n  - Expect \"to_have_url\" with timeout 5000ms\n    9 × unexpected value \"https://www.saucedemo.com/\"","statusTrace":"self = <test_page_login.TestsLogin object at 0x7f4a3065a710>\nopen_home_page = <pages.site_pages.SitePages object at 0x7f4a3060f130>\ninput_value = ['locked_out_user', 'secret_sauce', 'Логин заблокированного пользователя', 'Пользователь заблокирован']\n\n    @pytest.mark.order(2)\n    @pytest.mark.regression\n    @pytest.mark.negative\n    @pytest.mark.login\n    @pytest.mark.all\n    @allure.story(\"Негативный сценарий\")\n    @allure.tag(\"negative\")\n    @allure.severity(allure.severity_level.MINOR)\n    @pytest.mark.xfail(strict=True)\n    @pytest.mark.parametrize(\"input_value\", login_date_negative)\n    def test_login_negative(self, open_home_page, input_value: list) -> None:\n        run_login_test(open_home_page, input_value)\n    \n        expect_visible(open_home_page.error_text, open_home_page.error_text)\n        actual_msg = open_home_page.error_text.locator('h3').text_content()\n        print(f\"  ⚠️ Ошибка: {actual_msg}\")\n        with allure.step(f\"Появилось сообщение об ошибке: {actual_msg}\"):\n            attach_screenshot(open_home_page.page, \"Скриншот с ошибкой\")\n        with allure.step(f\"Проверяем переход на '{LOGO_PAGE_PRODUCTS}'\"):\n>           open_home_page.page_products()\n\ntests/test_page_login.py:83: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/site_pages.py:56: in page_products\n    expect_url(self.page, BASE_URL + PATH_PRODUCTS)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npage = <Page url='https://www.saucedemo.com/'>\nexpected = 'https://www.saucedemo.com/inventory.html'\n\n    def expect_url(page: Page, expected: str) -> None:\n        \"\"\"\n            Нативный expect: URL страницы.\n        \"\"\"\n        with allure.step(f'Проверить URL: «{expected}»'):\n>           expect(page).to_have_url(expected)\nE           AssertionError: Page URL expected to be 'https://www.saucedemo.com/inventory.html'\nE           Actual value: https://www.saucedemo.com/ \nE           Call log:\nE             - Expect \"to_have_url\" with timeout 5000ms\nE               9 × unexpected value \"https://www.saucedemo.com/\"\n\nutils/checks.py:35: AssertionError","steps":[{"name":"Ввести учётные данные: locked_out_user / secret_sauce","time":{"start":1769522869096,"stop":1769522869266,"duration":170},"status":"passed","steps":[{"name":"Проверить видимость элемента «Username»","time":{"start":1769522869096,"stop":1769522869122,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Проверить атрибут placeholder = «Username»","time":{"start":1769522869122,"stop":1769522869138,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Проверить видимость элемента «Password»","time":{"start":1769522869179,"stop":1769522869191,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Проверить атрибут placeholder = «Password»","time":{"start":1769522869191,"stop":1769522869209,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Проверить видимость элемента «Login»","time":{"start":1769522869232,"stop":1769522869254,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Проверить атрибут value = «Login»","time":{"start":1769522869255,"stop":1769522869266,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true},{"name":"Нажать кнопку: Login","time":{"start":1769522869266,"stop":1769522869356,"duration":90},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Проверить видимость элемента «<Locator frame=<Frame name= url='https://www.saucedemo.com/'> selector='#login_button_container > div > form > div.error-message-container.error'>»","time":{"start":1769522869357,"stop":1769522869368,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Появилось сообщение об ошибке: Epic sadface: Sorry, this user has been locked out.","time":{"start":1769522869389,"stop":1769522869472,"duration":83},"status":"passed","steps":[],"attachments":[{"uid":"3e5b7cf9a543782b","name":"Скриншот с ошибкой","source":"3e5b7cf9a543782b.png","type":"image/png","size":30420}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true},{"name":"Проверяем переход на 'Products'","time":{"start":1769522869472,"stop":1769522874477,"duration":5005},"status":"failed","statusMessage":"AssertionError: Page URL expected to be 'https://www.saucedemo.com/inventory.html'\nActual value: https://www.saucedemo.com/ \nCall log:\n  - Expect \"to_have_url\" with timeout 5000ms\n    9 × unexpected value \"https://www.saucedemo.com/\"\n\n","statusTrace":"  File \"/home/runner/work/effective-mobile/effective-mobile/tests/test_page_login.py\", line 83, in test_login_negative\n    open_home_page.page_products()\n  File \"/home/runner/work/effective-mobile/effective-mobile/pages/site_pages.py\", line 56, in page_products\n    expect_url(self.page, BASE_URL + PATH_PRODUCTS)\n  File \"/home/runner/work/effective-mobile/effective-mobile/utils/checks.py\", line 35, in expect_url\n    expect(page).to_have_url(expected)\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 19191, in to_have_url\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 147, in to_have_url\n    await self._expect_impl(\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n","steps":[{"name":"Проверить URL: «https://www.saucedemo.com/inventory.html»","time":{"start":1769522869472,"stop":1769522874476,"duration":5004},"status":"failed","statusMessage":"AssertionError: Page URL expected to be 'https://www.saucedemo.com/inventory.html'\nActual value: https://www.saucedemo.com/ \nCall log:\n  - Expect \"to_have_url\" with timeout 5000ms\n    9 × unexpected value \"https://www.saucedemo.com/\"\n\n","statusTrace":"  File \"/home/runner/work/effective-mobile/effective-mobile/utils/checks.py\", line 35, in expect_url\n    expect(page).to_have_url(expected)\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 19191, in to_have_url\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 147, in to_have_url\n    await self._expect_impl(\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true}],"attachments":[{"uid":"54e32ec9e0ed8419","name":"stdout","source":"54e32ec9e0ed8419.txt","type":"text/plain","size":556}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":12,"attachmentsCount":2,"hasContent":true},"afterStages":[{"name":"new_context::0","time":{"start":1769522874493,"stop":1769522874508,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_artifacts_recorder::0","time":{"start":1769522874508,"stop":1769522874508,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_pw_artifacts_folder::0","time":{"start":1769522874509,"stop":1769522874510,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser::0","time":{"start":1769522874510,"stop":1769522874550,"duration":40},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"playwright::0","time":{"start":1769522874552,"stop":1769522874564,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"severity","value":"minor"},{"name":"story","value":"Негативный сценарий"},{"name":"epic","value":"Техническое задание: AQA Python"},{"name":"feature","value":"Авторизация на https://www.saucedemo.com"},{"name":"tag","value":"negative"},{"name":"tag","value":"all"},{"name":"tag","value":"login"},{"name":"tag","value":"negative"},{"name":"tag","value":"regression"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_page_login"},{"name":"subSuite","value":"TestsLogin"},{"name":"host","value":"runnervmymu0l"},{"name":"thread","value":"3046-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_page_login"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"},{"name":"input_value","value":"['locked_out_user', 'secret_sauce', 'Логин заблокированного пользователя', 'Пользователь заблокирован']"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"minor","retries":[],"categories":[],"tags":["all","negative","regression","login"]},"source":"1c10dcce3ada6008.json","parameterValues":["'chromium'","['locked_out_user', 'secret_sauce', 'Логин заблокированного пользователя', 'Пользователь заблокирован']"]}